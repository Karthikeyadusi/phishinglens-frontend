import{j as e,m as u,r as d,S as p,A as N,a as v,b as y}from"./index-DSiW0FMx.js";const k={phish:{label:"Block",badge:"bg-rose-500/15 text-rose-200 border-rose-400/40"},suspicious:{label:"Escalate",badge:"bg-amber-500/15 text-amber-200 border-amber-400/40"},safe:{label:"Allow",badge:"bg-emerald-500/15 text-emerald-200 border-emerald-400/40"}},A={plan:"ðŸ§ ",planner:"ðŸ§ ",text:"ðŸ“",textanalyzer:"ðŸ“",url:"ðŸ”—",urlscanner:"ðŸ”—",image:"ðŸ–¼ï¸",imagevision:"ðŸ–¼ï¸",sandbox:"ðŸ§ª",decision:"âš–ï¸"},S=t=>t==="complete"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":t==="running"?"bg-amber-500/15 text-amber-200 border-amber-400/30":"bg-slate-500/15 text-slate-300 border-white/10",h={run:{badge:"border-white/10 bg-slate-950/60",label:"Primary",pill:"border-white/10 bg-white/5 text-white/80",dot:"bg-emerald-400"},skipped:{badge:"border-violet-400/40 bg-violet-500/15 shadow-[0_0_15px_rgba(139,92,246,0.3)]",label:"Skipped",pill:"border-violet-400/40 bg-violet-500/15 text-violet-100",dot:"bg-violet-400"},added:{badge:"border-cyan-400/40 bg-cyan-500/15 shadow-[0_0_15px_rgba(34,211,238,0.35)]",label:"Ad-hoc",pill:"border-cyan-400/40 bg-cyan-500/15 text-cyan-100",dot:"bg-cyan-400"}},_=({agent:t,verdict:r})=>{if(!t)return null;const l=k[r],i=Math.min(Math.round(t.guardrails.consumed_ms/t.guardrails.budget_ms*100),200),s=Array.from(new Set(t.steps.map(a=>a.action))).filter(a=>a!=="run");return e.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 to-slate-900 p-6 text-white",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-white/10 to-transparent","aria-hidden":!0}),e.jsxs("div",{className:"relative flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-sky-300/80",children:"Agent Activity"}),e.jsx("h3",{className:"text-3xl font-semibold tracking-tight",children:"Autonomous workflow trace"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",className:"group inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.3em] text-slate-200 transition hover:bg-white/10",children:["Copy Trace",e.jsxs("svg",{className:"h-3.5 w-3.5 transition-transform group-hover:-translate-y-px",viewBox:"0 0 20 20",fill:"none",children:[e.jsx("path",{d:"M6 6V4c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2h-2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"2",y:"6",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.5"})]})]}),e.jsx("span",{className:`rounded-full border px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${l.badge}`,children:l.label})]})]}),e.jsx("p",{className:"relative mt-4 text-sm text-slate-300",children:t.conclusion}),e.jsx("ol",{className:"relative mt-8 space-y-4",children:t.steps.map((a,c)=>{const n=a.id.toLowerCase(),o=A[n]||"âš™ï¸",x=h[a.action]??h.run;return e.jsxs("li",{className:"relative flex gap-4 rounded-2xl border border-white/5 bg-white/5 p-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl border text-xl ${x.badge}`,children:o}),c!==t.steps.length-1&&e.jsx("div",{className:"mt-2 h-full w-0.5 bg-white/10"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:["Step ",String(c+1).padStart(2,"0")]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:a.title})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold capitalize ${S(a.status)}`,children:a.status}),a.action!=="run"&&e.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-widest ${h[a.action].pill}`,children:h[a.action].label})]})]}),e.jsx("p",{className:"text-sm text-slate-300",children:a.description}),a.output&&e.jsx("p",{className:"text-sm text-slate-400",children:a.output}),a.reason&&e.jsxs("p",{className:"text-xs text-slate-400",children:["Note: ",a.reason]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[typeof a.duration_ms=="number"&&e.jsxs("span",{children:[a.duration_ms," ms"]}),e.jsxs("span",{className:"font-mono text-white/70",children:["ID: ",a.id]})]})]})]},a.id)})}),s.length>0&&e.jsx("div",{className:"mt-6 flex flex-wrap items-center gap-3 text-xs text-slate-400",children:s.map(a=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${h[a].dot}`}),h[a].label," steps"]},a))}),e.jsxs("div",{className:"mt-8 grid gap-4 rounded-2xl border border-white/5 bg-white/5 p-4 text-xs uppercase tracking-[0.3em] text-slate-400 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] text-white/60",children:"Total agent time"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold tracking-tight text-white",children:[(t.elapsed_ms/1e3).toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] text-white/60",children:"Guardrail budget"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold tracking-tight text-white",children:[i,"% used"]}),e.jsx("p",{className:"text-[10px] normal-case text-slate-300",children:t.guardrails.note})]}),e.jsxs("div",{className:"sm:col-span-2 flex flex-wrap items-center justify-between gap-3 text-[11px] normal-case",children:[e.jsxs("span",{children:["Planner Â· ",t.planner]}),e.jsxs("span",{children:["Escalation Â· ",t.guardrails.escalated?"Triggered":"Not needed"]})]})]})]})},M={complete:"border-emerald-400/40 bg-emerald-500/10 text-emerald-200",running:"border-amber-400/40 bg-amber-500/10 text-amber-200",pending:"border-slate-400/40 bg-slate-500/10 text-slate-200"},L={plan:"ðŸ§­",planner:"ðŸ§­",text:"ðŸ“",textanalyzer:"ðŸ“",url:"ðŸ”—",urlscanner:"ðŸ”—",image:"ðŸ–¼ï¸",imagevision:"ðŸ–¼ï¸",decision:"âš–ï¸"},C=({steps:t})=>e.jsxs("div",{className:"relative mt-8",children:[e.jsx("div",{className:"absolute left-1/2 top-0 h-full w-px -translate-x-1/2 bg-white/10","aria-hidden":!0}),e.jsx("ol",{className:"space-y-10",children:t.map((r,l)=>{const i=l%2===0,s=L[r.id.toLowerCase()]||"âš™ï¸",a=e.jsxs(u.div,{className:"relative w-full max-w-sm rounded-2xl border border-white/10 bg-slate-950/70 p-5 backdrop-blur",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.15},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-white/10 bg-white/5 text-2xl",children:s}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:["Phase ",String(l+1).padStart(2,"0")]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.title})]})]}),e.jsx("p",{className:"mt-3 text-sm text-slate-300",children:r.description}),r.output&&e.jsx("p",{className:"mt-2 text-xs text-slate-400",children:r.output}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-400",children:[e.jsx("span",{className:`rounded-full border px-3 py-1 uppercase tracking-widest ${M[r.status]}`,children:r.status}),typeof r.duration_ms=="number"&&e.jsxs("span",{children:[r.duration_ms," ms"]})]})]});return e.jsxs("li",{className:"relative grid grid-cols-[1fr_auto_1fr] items-center gap-6",children:[e.jsx("div",{className:`relative flex ${i?"justify-end pr-6":"justify-end pr-6 opacity-0 pointer-events-none"}`,"aria-hidden":!i,children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute right-0 top-1/2 h-px w-6 -translate-y-1/2 bg-white/20"}),a]})}),e.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-full border border-white/20 bg-gradient-to-br from-slate-900 to-slate-800 text-sm font-bold text-white shadow-xl",children:[String(l+1).padStart(2,"0"),l!==t.length-1&&e.jsx("span",{className:"absolute left-1/2 top-12 h-10 w-px -translate-x-1/2 bg-white/10","aria-hidden":!0})]}),e.jsx("div",{className:`relative flex ${i?"justify-start pl-6 opacity-0 pointer-events-none":"justify-start pl-6"}`,"aria-hidden":i,children:!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute left-0 top-1/2 h-px w-6 -translate-y-1/2 bg-white/20"}),a]})})]},r.id)})})]}),E={phish:"text-rose-200 border-rose-400/40 bg-rose-500/10",suspicious:"text-amber-200 border-amber-400/40 bg-amber-500/10",safe:"text-emerald-200 border-emerald-400/40 bg-emerald-500/10"},R=({agent:t,verdict:r})=>{const[l,i]=d.useState(!1),s=Math.min(Math.round(t.guardrails.consumed_ms/t.guardrails.budget_ms*100),200);return e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-900 p-6 text-white shadow-2xl",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-sky-300/80",children:"Agent replay"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.conclusion}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[e.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${E[r]}`,children:r}),e.jsxs("span",{children:["Planner Â· ",t.planner]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Elapsed"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(t.elapsed_ms/1e3).toFixed(2),"s"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Guardrail usage Â· ",s,"%"]})]})]}),e.jsx(C,{steps:t.steps}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{type:"button",onClick:()=>i(a=>!a),className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/5 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-200 transition hover:border-white/40 hover:bg-white/10",children:[l?"Hide guardrail details":"Show guardrail details",e.jsx("span",{className:`transition-transform ${l?"rotate-180":""}`,children:e.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M3 4l3 3 3-3",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l&&e.jsxs("div",{className:"mt-4 grid gap-4 rounded-2xl border border-white/10 bg-white/5 p-4 text-xs uppercase tracking-[0.3em] text-slate-300 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] text-white/70",children:"Escalation"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-white",children:t.guardrails.escalated?"Triggered":"Not required"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] text-white/70",children:"Budget note"}),e.jsx("p",{className:"mt-1 text-sm normal-case text-slate-200",children:t.guardrails.note})]})]})]})]})},D=({open:t,onClose:r,data:l})=>{const i=d.useRef(null);return d.useEffect(()=>{var c;if(!t||!i.current)return;const s=i.current.querySelectorAll('button, [href], textarea, [tabindex]:not([tabindex="-1"])');(c=s[0])==null||c.focus();const a=n=>{if(n.key==="Escape"&&(n.preventDefault(),r()),n.key==="Tab"&&s.length){const o=s[0],x=s[s.length-1];n.shiftKey&&document.activeElement===o?(n.preventDefault(),x==null||x.focus()):!n.shiftKey&&document.activeElement===x&&(n.preventDefault(),o==null||o.focus())}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,r]),e.jsx(y,{children:t&&l&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"analysis-details-title",children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),e.jsxs(u.div,{ref:i,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},className:"glass-surface relative w-full max-w-2xl overflow-hidden rounded-3xl p-0 text-slate-900 shadow-2xl dark:text-white",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white/90 p-6 dark:border-white/5 dark:bg-white/5",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-brand-600 dark:text-brand-300",children:"Analysis details"}),e.jsxs("h3",{id:"analysis-details-title",className:"mt-1 text-2xl font-bold",children:["Request ",l.request_id.split("-")[0]]})]}),e.jsxs("button",{type:"button",onClick:r,className:"group rounded-full border border-slate-200 bg-white/70 p-2 text-slate-500 transition-colors hover:bg-white hover:text-slate-900 dark:border-white/10 dark:bg-white/5 dark:text-white/70",children:[e.jsx("span",{className:"sr-only",children:"Close modal"}),e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),e.jsxs("div",{className:"grid gap-6 p-6 text-sm text-slate-600 dark:text-slate-300 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Detected brands"}),l.detected_brands.length?e.jsx("ul",{className:"space-y-1",children:l.detected_brands.map(s=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brand-400"}),s]},s))}):e.jsx("p",{className:"italic text-slate-400 dark:text-slate-500",children:"No brands detected"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Visual reasons"}),l.visual_reasons.length?e.jsx("ul",{className:"space-y-1",children:l.visual_reasons.map(s=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-400"}),s]},s))}):e.jsx("p",{className:"italic text-slate-400 dark:text-slate-500",children:"No visual flags"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Extracted URLs"}),l.extracted_urls.length?e.jsx("div",{className:"max-h-32 overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-white/10 dark:bg-slate-950/30",children:e.jsx("ul",{className:"space-y-1 font-mono text-xs",children:l.extracted_urls.map(s=>e.jsx("li",{className:"break-all text-slate-600 dark:text-slate-300",children:s},s))})}):e.jsx("p",{className:"italic text-slate-400 dark:text-slate-500",children:"No URLs extracted"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-slate-200 bg-white/80 p-4 dark:border-white/10 dark:bg-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Model Version"}),e.jsx("p",{className:"font-mono text-brand-500 dark:text-brand-300",children:l.model_version})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Timestamp"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:new Date(l.timestamp).toLocaleString()})]})]})})]})]})]})})},P=()=>{const[t,r]=d.useState(null),[l,i]=d.useState(!1),[s,a]=d.useState("intelligence"),c="mx-auto w-full max-w-4xl",n=d.useRef(null),o=d.useCallback(m=>{r(m),i(!1)},[]);d.useEffect(()=>{if(!(s==="agent"?!!(t!=null&&t.agent):!!t))return;const j=window.setTimeout(()=>{const b=n.current;if(!b)return;const w=b.getBoundingClientRect().top+window.scrollY-140;window.scrollTo({top:Math.max(w,0),behavior:"smooth"})},180);return()=>window.clearTimeout(j)},[s,t]);const x=s==="intelligence"?"Analyze URLs, text, and images with AI/ML models. Results combine Scanner + HuggingFace + Graph + OTX intelligence with 2-of-4 consensus voting.":"Agent mode replays the autonomous plan â†’ execute â†’ reflect loop with guardrails, so you can watch every tool fire in sequence.",g=e.jsxs("div",{className:"glass-surface flex h-64 w-full flex-col items-center justify-center rounded-3xl p-8 text-center text-slate-600 dark:text-slate-400",children:[e.jsx("div",{className:"mb-4 rounded-full border border-slate-200 bg-white/70 p-4 text-slate-400 dark:border-white/10 dark:bg-white/5",children:e.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"font-semibold",children:s==="intelligence"?"Awaiting submissionâ€¦":"Run an analysis to watch the agent mission log."}),e.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:s==="intelligence"?"Results will show verdict from Scanner, HF transformer, Graph GNN, and OTX feeds.":"Agent mode animates each step along the guardrailed workflow."})]}),f=()=>t?s==="agent"&&t.agent?e.jsx(R,{agent:t.agent,verdict:t.verdict}):e.jsx(v,{data:t,compact:!0,onViewDetails:()=>i(!0)}):g;return e.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-12 px-4 pb-20 pt-10 text-slate-900 dark:text-white sm:px-8",children:[e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-brand-500/20 bg-brand-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-widest text-brand-600 dark:text-brand-300",children:s==="intelligence"?"Multi-Modal Detection":"Agent Mode Demo"}),e.jsx("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/5 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400 dark:bg-white/10",children:["intelligence","agent"].map(m=>e.jsx("button",{type:"button",onClick:()=>a(m),className:`px-4 py-2 transition ${s===m?"bg-gradient-to-r from-brand-500 to-brand-600 text-white shadow-lg":"hover:text-white/90"}`,children:m==="intelligence"?"Intelligence Mode":"Agent Mode"},m))})]}),e.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white sm:text-5xl",children:[s==="intelligence"?"4-Source ":"Autonomous ",e.jsx("span",{className:"text-gradient-brand",children:s==="intelligence"?"fusion analysis":"agent replay"})]}),e.jsx("p",{className:"max-w-3xl text-lg text-slate-600 dark:text-slate-300",children:x})]})}),e.jsxs("div",{className:"space-y-10",children:[e.jsx(p,{className:c,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-0.5 rounded-[2rem] bg-gradient-to-r from-brand-500 to-purple-600 opacity-20 blur-xl"}),e.jsx("div",{className:"relative rounded-[2rem] bg-white/90 p-px dark:bg-slate-950/60",children:e.jsx(N,{showInlineResult:!1,onComplete:o,modeStrategy:s==="agent"?"auto":"manual",autoFocusOnMount:!0})})]})}),e.jsx(p,{delay:.1,className:c,children:e.jsx("div",{ref:n,className:"w-full",children:f()})},s)]}),s==="intelligence"&&(t==null?void 0:t.agent)&&e.jsx(p,{delay:.15,children:e.jsx(_,{agent:t.agent,verdict:t.verdict})}),e.jsx(D,{open:l,onClose:()=>i(!1),data:t})]})};export{P as default};
